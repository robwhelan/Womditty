<div>
    <div id="panel">
      	<form id="searchBox">
		<input id="searchBoxTarget" type="text" class="form-control" placeholder="Search Box">
		</form>
    </div>
  	<div id="mapCanvas" style="height:500px;"/></div>
</div>

<%= content_for :head do %>
<style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      /* #mapCanvas { height: 500px; width:500px; } */
    </style>
<% end %>

<%= content_for :javascript do %>

<script type="text/javascript"
src="http://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyAkmQDcP4u6gG5IULRLAiEjnfpE3vhYUOw&sensor=true">
</script>

<script type="text/javascript">
      function initialize() {
		var map = new google.maps.Map(document.getElementById('mapCanvas'), {
			mapTypeId: google.maps.MapTypeId.ROADMAP
		});

		var defaultBounds = new google.maps.LatLngBounds(
			new google.maps.LatLng(32.801993,-80.085236), // lower left
			new google.maps.LatLng(32.92369,-79.833924)); // upper right
		map.fitBounds(defaultBounds);

		var input = /** @type {HTMLInputElement} */(document.getElementById('searchBoxTarget'));
		var searchBox = new google.maps.places.SearchBox(input);
		
		var queryContents = $('input#searchBoxTarget').val();
		
	
		$('#searchBox').submit(function(){
		var request = {
			location: map,
			radius: '500',
			query: queryContents
		};
			service = new google.maps.places.PlacesService(map);
			service.textSearch(request, callback);			
		});
		
      }

		function callback(results, status) {
		  if (status == google.maps.places.PlacesServiceStatus.OK) {
		    for (var i = 0; i < results.length; i++) {
		      var place = results[i];
		      createMarker(results[i]);
		    }
		  }
		}
		
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>

<% end %>